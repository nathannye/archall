(()=>{var l=class{constructor(){this.people=document.querySelectorAll(".team-grid > div"),this.createJoinUs()}createListeners(){this.people.forEach((t,e)=>{t.addEventListener("touchstart",()=>{t.classList.toggle("active")})})}createJoinUs(){let t=document.querySelector(".team-grid__filler"),e=document.querySelector(".team-grid");t.dataset.hidden==="true"?t.remove():e.append(t)}};var c=class{constructor(){this.init()}init(){let t=document.querySelectorAll(".team-grid > div");(t==null?void 0:t.length)>0&&new l}};var h=class{constructor(){var t;this.elements=document.querySelectorAll(".project-list-item"),((t=this.elements)==null?void 0:t.length)>0&&this.init()}init(){[...elements].slice(2).forEach((t,e)=>{gsap.from(t,{scrollTrigger:{start:"top 90%",trigger:t.parentNode},opacity:0,y:30,duration:.9,ease:"expo.out"})})}};var d=class{constructor(t){this.el=t}init(){if(+this.el.textContent){let t=+this.el.textContent;gsap.from(this.el,{textContent:0,snap:{textContent:1},ease:"power3.out",duration:1.2,scrollTrigger:{start:"top 95%",trigger:this.el}})}}};var u=class{constructor(t){this.el=t,this.init()}init(){let t=this.el.querySelector("img");t.style.scale=100+DISTANCE+"%",gsap.to(this.el,{yPercent:DISTANCE/2,ease:"none",scrollTrigger:{start:"top bottom",end:"bottom top",trigger:el,scrub:!0}})}};var p=class{construtor(){this.init()}init(){let t=new Lenis;window.lenis=t;function e(i){t.raf(i),requestAnimationFrame(e)}requestAnimationFrame(e)}};var m=class{constructor(){this.parallaxElements=document.querySelectorAll('[data-animation="parallax"]')}init(){new p;let t=document.querySelectorAll('[data-animation="parallax"]');(t==null?void 0:t.length)>0&&t.forEach((i,o)=>{new u(i)}),new h;let e=document.querySelectorAll('[data-animation="count"]');(e==null?void 0:e.length)>0&&e.forEach((i,o)=>{new d(i)})}};var g=class{constructor(){this.blocksToMix=document.querySelectorAll(".mixing-blocks > *"),this.projectsWrapper=document.querySelector(".projects-wrapper"),this.projects=projectsWrapper.children,this.init()}gridPatternIndex(t){return 4+(t-1)*5}init(){this.blocksToMix.forEach((t,e)=>{let i=gridPatternIndex(e+1);if(i>this.projects.length)return;let o=this.projects[i-1];this.rojectsWrapper.insertBefore(t,o)})}};var f=class{constructor(t){this.el=t,this.isOpen=!1,this.triggers=document.querySelectorAll('[data-modal="trigger"]'),this.modalContent=this.el.querySelector(".modal-form")}init(){var t;(t=this.triggers)==null||t.forEach(e=>{e.addEventListener("click",i=>{i.preventDefault(),this.isOpen?this.tl.reverse():this.tl.play(),this.el.setAttribute("data-open",this.isOpen?"false":"true"),this.isOpen=!this.isOpen})})}};var v=class{constructor(){this.navOpen=!1,this.dropdownOpen=!1,this.activeImage=null,this.menuButton=document.querySelector('[data-nav="trigger"]'),this.carat=document.querySelector('[data-sectors="carat"]'),this.trigger=document.querySelector('[data-nav="dropdown"]'),this.panel=document.querySelector('[data-nav="panel"]'),this.optionsWrapper=document.querySelector('[data-nav="options"]'),this.options=document.querySelectorAll('[data-nav="option"]'),this.navLinks=document.querySelectorAll(".nav_link"),this.navContainer=document.querySelector('[data-nav="container"]'),this.optionsTl=gsap.timeline({paused:!0}),this.wrapAll=document.querySelector('[data-nav="options-wrap"]'),this.wrapAll.style.height=0,this.navTl=gsap.timeline({paused:!0}),this.init(),this.listeners(),console.log("created nav")}unlockScrollWhenCLickItem(){window.lenis.start()}toggleDropdown(){this.dropdownOpen?this.optionsTl.reverse():this.optionsTl.play(),this.dropdownOpen=!this.dropdownOpen}handleSectorIn(t){if(window.innerWidth<768||navigator.maxTouchPoints>0)return;let e=document.querySelectorAll('[data-nav="images"] img');!e[t]&&!navOpen||e[t].classList.add("active-image")}handleSectorOut(){document.querySelectorAll('[data-nav="images"] img').forEach((e,i)=>{e.classList.remove("active-image")})}init(){let t=gsap.matchMedia();t.add("(min-width: 768px)",()=>{this.optionsTl.to(this.carat,{rotate:180,duration:.7,ease:"expo.out"},0).to(this.navLinks,{opacity:.35,duration:.5,ease:"expo.out"},0).to(this.wrapAll,{height:"auto",duration:.4,ease:"expo.out"},0).from(this.options,{duration:.8,opacity:0,y:10,stagger:.04,ease:"expo.out"},0)}),t.add("(max-width: 767px)",()=>{this.optionsTl.to(this.carat,{rotate:180,duration:.7,ease:"expo.out"},0).to(this.navLinks,{opacity:.6,duration:.5,ease:"expo.out"},0).to(this.wrapAll,{height:"auto",duration:.7,ease:"expo.out"},0).from(this.options,{duration:.8,opacity:0,y:10,stagger:.04,ease:"expo.out"},0)}),gsap.set(this.panel,{clipPath:"inset(0% 100% 0% 0%)"}),this.navTl.to(this.panel,{clipPath:"inset(0% 0% 0% 0%)",pointerEvents:"auto",duration:.8,ease:"power4.out"},0)}toggleNav(){this.navOpen?this.navTl.reverse():this.navTl.play(),this.navOpen?window.lenis.start():window.lenis.stop(),this.menuButton.textContent=this.navOpen?"Menu":"Close",this.navOpen=!this.navOpen}listeners(){this.menuButton.addEventListener("click",this.toggleNav.bind(this)),this.navLinks.forEach((t,e)=>{t.addEventListener("click",this.unlockScrollWhenCLickItem.bind(this))}),this.trigger.addEventListener("click",this.toggleDropdown.bind(this)),this.options.forEach((t,e)=>{t.addEventListener("mouseover",()=>this.handleSectorIn(e)),t.addEventListener("mouseout",this.handleSectorOut.bind(this))})}};var y=class{constructor(){new g,new v,new m,console.loog("global created")}init(){let t=document.querySelector(".modal-wrapper");t&&new f(t)}};var S=class{constructor(t){this.heroSlider=t,this.items=document.querySelectorAll(".slider-item"),this.dots=document.querySelectorAll(".hero-slider__controller > .dot"),this.toggleButton=document.querySelector(".slider-toggle"),this.toggleIcons=this.toggleButton.querySelectorAll("img"),this.activeImage=1,this.duration=4200,this.interval,this.timer,this.paused=!1,this.createSliderInterval(),this.createClickListeners(),this.setInitialSlide()}setInitialSlide(){this.setActive(0)}killInterval(){this.interval&&clearInterval(this.interval)}toggleState(){this.paused=!this.paused,this.toggleButton.classList.toggle("paused"),this.paused?this.killInterval():this.createSliderInterval()}resetInterval(){this.interval&&(clearInterval(this.interval),this.timer?(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.createSliderInterval()},this.duration)):this.timer=setTimeout(()=>{this.createSliderInterval()},this.duration))}createClickListeners(){this.dots.forEach((t,e)=>{t.addEventListener("click",()=>{this.activeImage=e,this.clearSlides(),this.nextSlide(this.activeImage,!0),this.resetInterval()})}),this.toggleButton.addEventListener("click",()=>{this.toggleState()})}clearSlides(t){+t?(this.dots[t].classList.remove("active"),this.items[t].classList.remove("active")):(this.items.forEach(e=>{e.classList.remove("active")}),this.dots.forEach(e=>{e.classList.remove("active")}))}setActive(t){this.dots[t].classList.add("active"),this.items[t].classList.add("active")}nextSlide(t,e=!1){e?(this.clearSlides(),this.setActive(t)):(this.clearSlides(),t===this.items.length?(this.activeImage=0,this.setActive(this.activeImage)):this.setActive(this.activeImage)),this.activeImage++}createSliderInterval(){this.interval=setInterval(()=>{this.nextSlide(this.activeImage)},this.duration)}};var x=class{constructor(t){this.cards=t,this.initRandomizer(),this.countSlides()}countSlides(){let t=document.querySelector(".market-number"),e=this.cards.length;t.innerText="//"+e}getRandom(t){return Math.floor(Math.random()*t)}initRandomizer(){this.cards.forEach((t,e)=>{let i=Array.from(t.querySelectorAll("img"));if(i&&i.length>0){let o=this.getRandom(i.length-1),r=i[o];i.forEach((n,a)=>{a!==o&&n.remove()})}})}};var w=class{constructor(){let t=document.querySelector(".slider-container"),e=document.querySelectorAll(".market-slider__item-images");e&&new x(e),t&&new S(t)}};var E=class{constructor({point:t,containerHeight:e,containerWidth:i,isMobile:o,container:r,index:n,selected:a}){this.point=t,this.selected=a,this.isMobile=window.innerWidth<=786,this.container=r,this.containerHeight=e,this.containerWidth=i,this.marker=this.point.querySelector('[data-point="marker"]'),this.img=this.container.querySelector('[data-point="image"] img'),this.mobilePopup=[...this.container.querySelectorAll('[data-point="mobile-popup"]')][n],this.posX=this.marker.dataset.x/100,this.posY=this.marker.dataset.y/100,this.mobileCloseButton=this.mobilePopup.querySelector("img"),this.isPopupLeft=this.isMobile?!1:this.posX>=.8,this.popup=this.point.querySelector('[data-point="popup"]'),this.closeButton=this.point.querySelector('[data-point="close"]'),this.init(),this.listeners(),this.listeners2(),this.setPosition()}listeners(){this.img.complete?this.setPosition():this.img.onload=()=>{this.setPosition()}}listeners2(){this.marker.addEventListener("click",()=>this.open.bind(this)()),this.closeButton.addEventListener("click",()=>this.close.bind(this)()),this.mobileCloseButton.addEventListener("click",()=>this.close.bind(this)())}setPosition(){this.containerHeight=this.container.querySelector('[data-point="image"]').clientHeight;let t=Math.min(this.posX,.9),e=Math.min(this.posY,.9),i=`translate(${t*this.containerWidth}px, ${e*this.containerHeight}px)`;this.point.style.transform=i,this.isPopupLeft=this.isMobile?!1:this.posX>=.8,this.isPopupLeft?this.popup.classList.add("is-left"):this.popup.classList.remove("is-left")}open(){this.container.active=!0,this.point.dataset.open=!0,this.isMobile?gsap.to(this.mobilePopup,{opacity:1,ease:"expo.out",duration:.8}):gsap.to(this.popup,{opacity:1,ease:"expo.out",duration:.8})}close(){this.container.dataset.active=!1,this.point.dataset.open=!1,this.isMobile?gsap.to(this.mobilePopup,{opacity:0,ease:"expo.out",duration:.8}):gsap.to(this.popup,{opacity:0,ease:"expo.out",duration:.8})}resize(){this.containerWidth=this.img.getBoundingClientRect().width,this.containerHeight=this.img.getBoundingClientRect().height,window.innerWidth<=768&&this.isMobile?this.isMobile=!0:this.isMobile=!1,this.setPosition()}init(){this.popup.style.opacity=0,this.mobilePopup.style.opacity=0,this.isPopupLeft&&(this.popup.style.transform="translate(calc(-100% - 75px),20px,0px);"),this.point.style.position="absolute"}},I=class{constructor(t){this.container=t,this.isMobile=window.innerWidth<=768,this.image=this.container.querySelector('[data-point="image"] > img'),this.containerHeight=this.image.getBoundingClientRect().height,this.containerWidth=this.image.getBoundingClientRect().width,this.selected=null,this.createPoints(),this.listeners()}createPoints(){this.points=[...this.container.querySelectorAll('[data-point="point"]')],this.points=this.points.map((t,e)=>new E({point:t,index:e,isMobile:this.isMobile,containerHeight:this.containerHeight,containerWidth:this.containerWidth,container:this.container,selected:this.selected}))}listeners(){window.addEventListener("resize",()=>{this.isMobile=window.innerWidth<=768,this.containerHeight=this.image.getBoundingClientRect().height,this.containerWidth=this.image.getBoundingClientRect().width,this.points.forEach(t=>t.resize())}),this.image.complete?(this.containerHeight=this.image.getBoundingClientRect().height,this.containerWidth=this.image.getBoundingClientRect().width):this.image.onload=()=>{this.containerHeight=this.image.getBoundingClientRect().height,this.containerWidth=this.image.getBoundingClientRect().width},this.points.forEach((t,e)=>{t.marker.addEventListener("click",()=>{this.selected!==e&&(this.points.forEach(i=>i.close()),t.open()),this.selected=e}),t.closeButton.addEventListener("click",()=>{t.close(),this.points.filter(i=>i!==this.selected).forEach(i=>i.close()),this.selected=null}),t.mobileCloseButton.addEventListener("click",()=>{this.points.filter(i=>i!==this.selected).forEach(i=>i.close()),this.selected=null})})}},q=class{constructor(){this.createCarousel(),this.randomizeProjectsInSlider(),this.createHotspots()}shuffle(){let t=array.length;for(;t!=0;){let e=Math.floor(Math.random()*t);t--,[array[t],array[e]]=[array[e],array[t]]}}createCarousel(){let t=document.querySelector('[data-slider="wrapper"]');if(!t)return;let e=!1,i=!0,o={loop:!1,dragFree:!0},r=EmblaCarousel(t,o),n=document.querySelector('[data-slider="fade-next"]'),a=n.querySelector('[data-slider="button"'),L=document.querySelector('[data-slider="fade-prev"]'),A=L.querySelector('[data-slider="button"');L.classList.add("cant-scroll"),r.on("scroll",P=>{!r.canScrollNext()&&!e?(n.classList.add("cant-scroll"),e=!0):r.canScrollNext()&&e&&(n.classList.remove("cant-scroll"),e=!1),!r.canScrollPrev()&&!i?(L.classList.add("cant-scroll"),i=!0):r.canScrollPrev()&&i&&(L.classList.remove("cant-scroll"),i=!1)}),a.addEventListener("click",()=>{r.scrollNext()}),A.addEventListener("click",()=>{r.scrollPrev()})}randomizeProjectsInSlider(){let t=document.querySelectorAll(".project-slider-item"),e=document.querySelector('[data-slider="container"]');if(!(!(t!=null&&t.length)>0&&!e))for(var i=t.length;i>=0;i--)e.appendChild(t[Math.random()*i|0])}createHotspots(){var t;this.containers=[...document.querySelectorAll('[data-points="container"]')],((t=this.containers)==null?void 0:t.length)!==0&&(this.containers=this.containers.map(e=>new I(e)))}};var b=class{constructor(){var t;this.blocksToMix=document.querySelectorAll(".mixing-blocks > *"),this.projectsWrapper=document.querySelector(".sector-projects-wrapper"),this.projects=(t=this.projectsWrapper)==null?void 0:t.children,(blocksToMix==null?void 0:blocksToMix.length)>0&&this.init()}init(){this.blocksToMix.forEach((t,e)=>{let i=gridPatternIndex(e+1);if(i+1>this.projects.length){hideMixBlock(t);return}let o=this.projects[i-1];this.projectsWrapper.insertBefore(t,o),alignMixBlock(t)})}};var k=class{constructor(){currentPage=window.location.pathname,console.log("current page",currentPage),this.init()}init(){new y,this.currentPage==="/"&&(new w,console.log("created home")),this.currentPage==="/about"&&(new c,console.log("created about")),this.currentPage.startsWith("/projects/")&&(new q,console.log("created project")),this.currentPage.startsWith("/sector/")&&(new b,console.log("created sector"))}};new k;})();
